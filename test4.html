<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®‰å…¨æ„è¯†æŒ‘æˆ˜ - ç¬¬4é¢˜</title>
    <style>
        /* --- ç»Ÿä¸€æ ·å¼ï¼Œå®Œå…¨å¤åˆ¶è‡ªæ‚¨æä¾›çš„ text1.html æ¨¡æ¿ --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f4; /* æ•´ä½“èƒŒæ™¯ */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }
        .container {
            background-color: white; /* å¡ç‰‡èƒŒæ™¯ */
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            max-width: 500px;
            width: 90%;
            text-align: center;
        }
        
        /* è¿›åº¦æ˜¾ç¤ºæ ·å¼ */
        .progress-bar {
            font-size: 14px;
            color: #6c757d;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .header {
            color: #d9534f; /* çº¢è‰²æ ‡é¢˜ */
            font-size: 24px;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        /* é‚®ä»¶å†…å®¹æ ·å¼ï¼ˆé»„è‰²è­¦ç¤ºï¼‰*/
        .email-content {
            border: 1px solid #ddd;
            padding: 15px;
            background-color: #fffbe6;
            text-align: left;
            margin-bottom: 20px;
            border-radius: 4px;
            font-size: 15px;
        }
        .email-content p { margin: 10px 0; }
        .email-content hr { border: 0; border-top: 1px solid #ddd; }

        .btn-area {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
            flex: 1;
        }
        
        /* é’“é±¼æŒ‰é’®ï¼ˆè“è‰²ï¼‰*/
        .btn-phishing {
            background-color: #007bff;
            color: white;
        }
        .btn-phishing:hover {
            background-color: #0056b3;
        }
        
        /* å®‰å…¨æŒ‰é’®ï¼ˆç°è‰²ï¼‰*/
        .btn-safe {
            background-color: #6c757d;
            color: white;
        }
        .btn-safe:hover {
            background-color: #545b62;
        }

        /* æ±‰å­—â€œä¸‹ä¸€æ¡â€æŒ‰é’®æ ·å¼ï¼ˆç»¿è‰²ï¼‰*/
        .btn-next {
            background-color: #28a745;
            color: white;
            width: 100%;
            margin-top: 15px;
            display: none; /* åˆå§‹éšè— */
        }
        .btn-next:hover {
            background-color: #218838;
        }
        .btn:disabled { 
            opacity: 0.6; 
            cursor: not-allowed; 
        }

        /* åˆ†ææŠ¥å‘Šå±•ç¤ºæ ·å¼ */
        .alert-box {
            margin-top: 20px;
            padding: 15px;
            display: none;
            border-radius: 4px;
            text-align: left;
            font-size: 14px;
            line-height: 1.6;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .failure {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>

    <div class="container">
        <!-- è¿›åº¦æ¡æ˜¾ç¤ºä¸ºç¬¬4é¢˜ -->
        <div id="scoreBoard" class="progress-bar">é¢˜ç›®ï¼š4 / 10</div>

        <div class="header">ğŸ›¡ï¸ å­¦ç”Ÿå¯å®¤åœºæ™¯</div>
        <p>è¯·ä»”ç»†é˜…è¯»åœºæ™¯ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºé’“é±¼æ”»å‡»ï¼š</p>

        <!-- ç¬¬å››é¢˜çš„é‚®ä»¶å†…å®¹ -->
        <div class="email-content">
            <p><strong>å‘ä»¶äºº:</strong> å­¦ç”Ÿå…¬å¯“ &lt;network@zju-edu.org&gt;</p>
            <p><strong>ä¸»é¢˜:</strong> ã€é€šçŸ¥ã€‘è¿è§„ç”µå™¨å¤„åˆ†</p>
            <hr>
            <p>åŒå­¦ä½ å¥½ï¼š</p>
            <p>æŸ¥å¯æ—¶å‘ç°ä½ åœ¨å®¿èˆå†…è¿è§„ä½¿ç”¨é€šç”µå¼å–æš–è®¾å¤‡ï¼Œç°é˜¿å§¨ä»£ä¸ºä¿ç®¡ï¼Œç»™äºˆè­¦å‘Šã€‚</p>
            <p>å¦‚æœ‰å¼‚è®®ï¼Œç‚¹å‡»ä»¥ä¸‹é“¾æ¥åœ¨ä¸¤ä¸ªå·¥ä½œæ—¥å†…æäº¤ç”³è¯‰ææ–™ï¼š</p>
            <!-- é“¾æ¥æ ·å¼å¤åˆ¶è‡ª text1 æ¨¡æ¿ä¸­çš„ inline style -->
            <p style="text-align: center;">
                <span style="color: blue; text-decoration: underline; cursor: pointer;">[ç”³è¯‰ææ–™æäº¤å¤„]</span>
            </p>
            <p>æµ™æ±Ÿå¤§å­¦å­¦ç”Ÿå…¬å¯“</p>
        </div>

        <div class="btn-area">
            <button id="btnPhish" class="btn btn-phishing" onclick="makeChoice(true)">æ˜¯é’“é±¼</button>
            <button id="btnSafe" class="btn btn-safe" onclick="makeChoice(false)">å®‰å…¨</button>
        </div>

        <div id="resultHint" class="alert-box"></div>

        <button id="nextBtn" class="btn btn-next" onclick="goNext()">ä¸‹ä¸€æ¡</button>
    </div>

    <script>
        // ==========================================
        // === æœ¬é¡µé…ç½®åŒºåŸŸ (ä¿æŒç¬¬4é¢˜çš„é…ç½®ï¼Œä½†æ›´æ–°è§£æé¢œè‰²ä»¥é€‚åº”æµ…è‰²ä¸»é¢˜) ===
        const currentQNum = 4;        
        const nextPageName = "test5.html"; // ä¸‹ä¸€é¢˜æ–‡ä»¶å
        const isPhishingAnswer = true; // æ­£ç¡®ç­”æ¡ˆã€‚true:æ­¤å†…å®¹æ˜¯é’“é±¼
        // æ›´æ”¹äº†åˆ†ææ–‡æœ¬ä¸­çš„é¢œè‰²ï¼Œä½¿å…¶åœ¨æµ…è‰²çš„æç¤ºæ¡†ä¸­æ¸…æ™°å¯è§
        const analysis = "è§£æï¼šå‘ä»¶äººåç¼€ä¸º <span style='font-family:monospace; color:#a04040;'>@zju-edu.org</span>ï¼Œå¹¶éå®˜æ–¹çš„ <span style='font-family:monospace; font-weight:bold; color:#008000;'>.edu.cn</span> åç¼€ï¼Œå±äºå…¸å‹çš„æ¬ºéª—æ€§åŸŸåå†’å……ã€‚å¹¶ä¸”ï¼Œåœ¨ä¾‹è¡Œæ£€æŸ¥æˆ–çªå‡»æ£€æŸ¥ä¸­å‘ç°è¿è§„ç”µå™¨åï¼Œæƒ…èŠ‚è¾ƒè½»ï¼Œåªä¼šå°†å…¶æš‚æ‰£ï¼Œå¹¶å¯¹å­¦ç”Ÿè¿›è¡Œæ‰¹è¯„æ•™è‚²";
        // ==========================================

        function updateProgress() {
            // ä½¿ç”¨ || 0 ç¡®ä¿ total å§‹ç»ˆæ˜¯æ•°å­—
            const total = parseInt(localStorage.getItem('fish_total') || 0);
            // æ˜¾ç¤ºå½“å‰é¢˜å· / æ€»é¢˜æ•°
            document.getElementById('scoreBoard').innerText = `é¢˜ç›®ï¼š${currentQNum} / 10`;
        }

        function makeChoice(userChoice) {
            document.getElementById('btnPhish').disabled = true;
            document.getElementById('btnSafe').disabled = true;
            
            const resultHint = document.getElementById('resultHint');
            const nextBtn = document.getElementById('nextBtn');
            
            const isCorrect = (userChoice === isPhishingAnswer);

            let score = parseInt(localStorage.getItem('fish_score') || 0);
            let total = parseInt(localStorage.getItem('fish_total') || 0);
            
            if (isCorrect) {
                score++;
                localStorage.setItem('fish_score', score.toString());
                resultHint.className = "alert-box success";
                resultHint.innerHTML = "<strong>âœ… æ­£ç¡®ï¼</strong><br>" + analysis;
            } else {
                resultHint.className = "alert-box failure";
                resultHint.innerHTML = "<strong>âŒ é”™è¯¯ã€‚</strong><br>" + analysis;
            }
            
            // åœ¨è¿™é‡Œæ›´æ–° totalï¼Œå­˜å‚¨çš„æ˜¯*å·²å®Œæˆ*çš„é¢˜æ•°
            total++;
            localStorage.setItem('fish_total', total.toString());

            // updateProgress(); // ä¿æŒä¸åŸé€»è¾‘ä¸€è‡´ï¼Œä¸åœ¨æ­¤å¤„æ›´æ–°é¡µé¢é¢˜å·

            resultHint.style.display = 'block';
            nextBtn.style.display = 'block';
        }

        function goNext() {
            const total = parseInt(localStorage.getItem('fish_total') || 0); // ç¡®ä¿æ˜¯æ•°å­—
            // æ£€æŸ¥æ˜¯å¦å·²å®Œæˆæ‰€æœ‰é¢˜ç›®
            if (total >= 10) {
                window.location.href = 'result.html';
            } else {
                // å¦åˆ™è·³è½¬åˆ°ä¸‹ä¸€é¢˜ (test5.html)
                window.location.href = nextPageName;
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºè¿›åº¦
        updateProgress();
    </script>
</body>
</html>
